import{s as I,e as V,c as M,b as O,f as U,p as L,i as j,B,n as S,C as F,o as N,u as T}from"./scheduler.DwZrByy6.js";import{S as P,i as x,b as G,d as J,m as K,a as Q,t as X,e as Z}from"./index.DyjbLJvz.js";import{_ as v}from"./preload-helper.C1FmrZbK.js";function p(o){let i,t,a;return{c(){i=V("div"),this.h()},l(n){i=M(n,"DIV",{style:!0,class:!0}),O(i).forEach(U),this.h()},h(){L(i,"style",o[0]),L(i,"class","m-0")},m(n,l){j(n,i,l),t||(a=B(o[1].call(null,i)),t=!0)},p(n,[l]){l&1&&L(i,"style",n[0])},i:S,o:S,d(n){n&&U(i),t=!1,a()}}}function $(o,i){return i.forEach(([t,a])=>o[t]=a),o}function ee(o,i,t){let{target:a=void 0}=i,{sketch:n=void 0}=i,{parentDivStyle:l="display: block;"}=i,{debug:c=!1}=i,u;const C=F(),h={ref(){C("ref",a)},instance(){C("instance",u)}};function _(s){return t(2,a=s),{destroy(){t(2,a=void 0)}}}return N(async()=>{const s=await v(()=>import("./p5.min.BwJiqC9S.js").then(d=>d.p),[],import.meta.url),{default:m}=s,f=Object.entries(s).filter(([d,R])=>R instanceof Function&&d[0]!=="_"&&d!=="default");c&&console.log("available p5 native classes",f),u=new m(d=>(d=$(d,f),c&&console.log("p5 instance",d),window._p5Instance=d,n(d)),a),h.ref(),h.instance()}),o.$$set=s=>{"target"in s&&t(2,a=s.target),"sketch"in s&&t(3,n=s.sketch),"parentDivStyle"in s&&t(0,l=s.parentDivStyle),"debug"in s&&t(4,c=s.debug)},[l,_,a,n,c]}class te extends P{constructor(i){super(),x(this,i,ee,p,I,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function ie(o){let i,t,a;return t=new te({props:{sketch:o[1]}}),{c(){i=V("div"),G(t.$$.fragment),this.h()},l(n){i=M(n,"DIV",{class:!0});var l=O(i);J(t.$$.fragment,l),l.forEach(U),this.h()},h(){L(i,"class","viz-container svelte-1c5n77j")},m(n,l){j(n,i,l),K(t,i,null),o[12](i),a=!0},p:S,i(n){a||(Q(t.$$.fragment,n),a=!0)},o(n){X(t.$$.fragment,n),a=!1},d(n){n&&U(i),Z(t),o[12](null)}}}function ne(o,i,t){let{grid:a=50}=i,{gridY:n=2}=i,{gradientWidth:l=10}=i,{highlite:c="#0000ff"}=i,{endColor:u="#ffffff"}=i,{imageURL:C=""}=i,{imageWidth:h=1200}=i,{imageHeight:_=800}=i,{resize:s}=i,m,r,f=null,d=[],R=[];function E(){for(let e=0;e<n;e++)d[e]=r?r.random(0,a):0,R[e]=r?r.random(-.1,.1):0}let q=e=>{e.setup=()=>{const w=m.offsetWidth,y=m.offsetHeight;e.createCanvas(w,y),e.noStroke(),e.rectMode(e.CORNER),E(),e.background(255),e._grid=a,e._gridY=n,e._gradientWidth=l,e._startColor=c,e._endColor=u,e._imageURL=C,e._imageWidth=h,e._imageHeight=_,t(11,r=e)},e.draw=()=>{e.fill(255,20),e.rect(0,0,e.width,e.height);const w=e.width/e._grid,y=e.height/e._gridY;for(let g=0;g<e._gridY;g++)d[g]=(d[g]+R[g])%e._grid;e.frameCount%120===0&&(t(2,a=e.random([50,75,100])),t(3,n=e.random([1,2,3,4,5])),t(4,l=e.random([5,7,10,15,20])));for(let g=0;g<e._gridY;g++)for(let b=0;b<e._grid;b++){let z=b*w,H=g*y,k=b+.5,W=Math.abs(k-d[g]);W>e._grid/2&&(W=e._grid-W);let Y=e.constrain(W/e._gradientWidth,0,1),D=e.lerpColor(e.color(e._startColor),e.color(e._endColor),Y);e.fill(D),e.stroke(20),e.strokeWeight(.3),e.rect(z,H,w,y)}if(e._imageURL&&(!f||f.url!==e._imageURL)&&e.loadImage(e._imageURL,g=>{g.url=e._imageURL,f=g}),f){let g=30,b=e._imageWidth-2*g,z=e._imageHeight-2*g,H=Math.min(b/f.width,z/f.height),k=f.width*H,W=f.height*H,Y=(e._imageWidth-k)/2,D=(e._imageHeight-W)/2;e.image(f,Y,D,k,W)}},e.windowResized=()=>{const w=m.offsetWidth,y=m.offsetHeight;e.resizeCanvas(w,y)}};function A(e){T[e?"unshift":"push"](()=>{m=e,t(0,m)})}return o.$$set=e=>{"grid"in e&&t(2,a=e.grid),"gridY"in e&&t(3,n=e.gridY),"gradientWidth"in e&&t(4,l=e.gradientWidth),"highlite"in e&&t(5,c=e.highlite),"endColor"in e&&t(6,u=e.endColor),"imageURL"in e&&t(7,C=e.imageURL),"imageWidth"in e&&t(8,h=e.imageWidth),"imageHeight"in e&&t(9,_=e.imageHeight),"resize"in e&&t(10,s=e.resize)},o.$$.update=()=>{o.$$.dirty&3068&&r&&(t(11,r._grid=a,r),t(11,r._gridY=n,r),t(11,r._gradientWidth=l,r),t(11,r._startColor=c,r),t(11,r._endColor=u,r),t(11,r._imageURL=C,r),t(11,r._imageWidth=h,r),t(11,r._imageHeight=_,r),E()),o.$$.dirty&3840&&r&&h&&_&&s==!0&&r.resizeCanvas(h,_)},[m,q,a,n,l,c,u,C,h,_,s,r,A]}class le extends P{constructor(i){super(),x(this,i,ne,ie,I,{grid:2,gridY:3,gradientWidth:4,highlite:5,endColor:6,imageURL:7,imageWidth:8,imageHeight:9,resize:10})}}export{le as V};
