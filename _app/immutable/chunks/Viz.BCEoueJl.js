import{s as G,e as V,c as j,b as P,f as x,p as W,i as v,B as J,n as S,C as K,o as Q,u as Z}from"./scheduler.DwZrByy6.js";import{S as O,i as T,b as p,d as $,m as ee,a as te,t as ie,e as ne}from"./index.DyjbLJvz.js";import"./entry.D-yk0dM4.js";import{_ as se}from"./preload-helper.C1FmrZbK.js";function ae(l){let i,t,a;return{c(){i=V("div"),this.h()},l(n){i=j(n,"DIV",{style:!0,class:!0}),P(i).forEach(x),this.h()},h(){W(i,"style",l[0]),W(i,"class","m-0")},m(n,f){v(n,i,f),t||(a=J(l[1].call(null,i)),t=!0)},p(n,[f]){f&1&&W(i,"style",n[0])},i:S,o:S,d(n){n&&x(i),t=!1,a()}}}function re(l,i){return i.forEach(([t,a])=>l[t]=a),l}function le(l,i,t){let{target:a=void 0}=i,{sketch:n=void 0}=i,{parentDivStyle:f="display: block;"}=i,{debug:d=!1}=i,w;const R=K(),u={ref(){R("ref",a)},instance(){R("instance",w)}};function m(c){return t(2,a=c),{destroy(){t(2,a=void 0)}}}return Q(async()=>{const c=await se(()=>import("./p5.min.BwJiqC9S.js").then(r=>r.p),[],import.meta.url),{default:g}=c,s=Object.entries(c).filter(([r,U])=>U instanceof Function&&r[0]!=="_"&&r!=="default");d&&console.log("available p5 native classes",s),w=new g(r=>(r=re(r,s),d&&console.log("p5 instance",r),window._p5Instance=r,n(r)),a),u.ref(),u.instance()}),l.$$set=c=>{"target"in c&&t(2,a=c.target),"sketch"in c&&t(3,n=c.sketch),"parentDivStyle"in c&&t(0,f=c.parentDivStyle),"debug"in c&&t(4,d=c.debug)},[f,m,a,n,d]}class ce extends O{constructor(i){super(),T(this,i,le,ae,G,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function fe(l){let i,t,a;return t=new ce({props:{sketch:l[1]}}),{c(){i=V("div"),p(t.$$.fragment),this.h()},l(n){i=j(n,"DIV",{class:!0});var f=P(i);$(t.$$.fragment,f),f.forEach(x),this.h()},h(){W(i,"class","viz-container svelte-1c5n77j")},m(n,f){v(n,i,f),ee(t,i,null),l[12](i),a=!0},p:S,i(n){a||(te(t.$$.fragment,n),a=!0)},o(n){ie(t.$$.fragment,n),a=!1},d(n){n&&x(i),ne(t),l[12](null)}}}function he(l,i,t){let{asciiGradient:a="▚▀▓▒░#@■□▪▫/*+=-~◆◇⬤▚▀▓▒░◯○^:,._▚▀▓▒░#@■□▪▫:·"}=i;a="▚▀▓▒░#@■□▪▫/*+=-~◆◇⬤▚▀▓▒░●^:,._▚▀▓▒░#@■□▪▫:·";let{grid:n=15}=i,{scale:f=.01}=i,{speed:d=.005}=i,{highlite:w="#0000ff"}=i,{imageURL:R=""}=i,{imageWidth:u=1200}=i,{imageHeight:m=800}=i,{resize:c}=i,g,E=0,s,r=null,U=e=>{e.setup=()=>{const o=g.offsetWidth,_=g.offsetHeight;e.createCanvas(o,_),e.textFont("Courier"),e.textAlign(e.CENTER,e.CENTER),e.noStroke(),e.frameRate(20),e._asciiGradient=a,e._grid=n,e._scale=f,e._speed=d,e._highlite=w,e._imageURL=R,e._imageWidth=u,e._imageHeight=m,t(11,s=e)},e.draw=()=>{e.background("#efefef");const o=1;if(E+=o*e._speed,M(E,o,e._scale),e._imageURL&&(!r||r.url!==e._imageURL)&&e.loadImage(e._imageURL,_=>{_.url=e._imageURL,r=_}),r){let _=n,H=e._imageWidth-2*_,b=e._imageHeight-2*_,C=Math.min(H/r.width,b/r.height),y=r.width*C,I=r.height*C,k=(e._imageWidth-y)/2,L=(e._imageHeight-I)/2;e.image(r,k,L,y,I)}};function M(o,_,H){const b=e.floor(e.width/e._grid),C=e.floor(e.height/e._grid),y=e.width/b;e.textSize(y);const I=o*.9,k=o*.9;let L=new Array(C);for(let h=0;h<C;h++)L[h]=e.sin(o+h*.1);let A=new Array(b);for(let h=0;h<b;h++)A[h]=e.cos(o+h*.1);const N=4;for(let h=0;h<C;h++)for(let z=0;z<b;z++){const q=e.noise((z+I)*H,(h+k)*H,o),D=e.floor(e.map(q,0,1,0,e._asciiGradient.length-1)),B=e._asciiGradient.charAt(D),X=z*y+y/2+L[h],Y=h*y+y/2+A[z];D%N===0?e.fill(e._highlite):e.fill("#ffffff"),e.push(),e.translate(X,Y),e.text(B,0,0),e.pop()}}e.windowResized=()=>{e.resizeCanvas(g==null?void 0:g.offsetWidth,g==null?void 0:g.offsetHeight)}};function F(e){Z[e?"unshift":"push"](()=>{g=e,t(0,g)})}return l.$$set=e=>{"asciiGradient"in e&&t(2,a=e.asciiGradient),"grid"in e&&t(3,n=e.grid),"scale"in e&&t(4,f=e.scale),"speed"in e&&t(5,d=e.speed),"highlite"in e&&t(6,w=e.highlite),"imageURL"in e&&t(7,R=e.imageURL),"imageWidth"in e&&t(8,u=e.imageWidth),"imageHeight"in e&&t(9,m=e.imageHeight),"resize"in e&&t(10,c=e.resize)},l.$$.update=()=>{l.$$.dirty&3068&&s&&(t(11,s._asciiGradient=a,s),t(11,s._grid=n,s),t(11,s._scale=f,s),t(11,s._speed=d,s),t(11,s._highlite=w,s),t(11,s._imageURL=R,s),t(11,s._imageWidth=u,s),t(11,s._imageHeight=m,s)),l.$$.dirty&3840&&s&&u&&m&&c==!0&&s.resizeCanvas(u,m)},[g,U,a,n,f,d,w,R,u,m,c,s,F]}class me extends O{constructor(i){super(),T(this,i,he,fe,G,{asciiGradient:2,grid:3,scale:4,speed:5,highlite:6,imageURL:7,imageWidth:8,imageHeight:9,resize:10})}}export{me as V};
