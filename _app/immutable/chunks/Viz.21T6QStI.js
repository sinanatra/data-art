import{s as j,e as P,c as M,b as O,f as E,p as x,i as B,B as Z,n as A,C as p,o as $,u as ee}from"./scheduler.DwZrByy6.js";import{S as T,i as v,b as te,d as ie,m as ne,a as se,t as ae,e as re}from"./index.DyjbLJvz.js";import"./entry.JGrL8Kdg.js";import{_ as ce}from"./preload-helper.C1FmrZbK.js";function le(c){let i,t,a;return{c(){i=P("div"),this.h()},l(s){i=M(s,"DIV",{style:!0,class:!0}),O(i).forEach(E),this.h()},h(){x(i,"style",c[0]),x(i,"class","m-0")},m(s,l){B(s,i,l),t||(a=Z(c[1].call(null,i)),t=!0)},p(s,[l]){l&1&&x(i,"style",s[0])},i:A,o:A,d(s){s&&E(i),t=!1,a()}}}function oe(c,i){return i.forEach(([t,a])=>c[t]=a),c}function fe(c,i,t){let{target:a=void 0}=i,{sketch:s=void 0}=i,{parentDivStyle:l="display: block;"}=i,{debug:d=!1}=i,y;const b=p(),w={ref(){b("ref",a)},instance(){b("instance",y)}};function u(r){return t(2,a=r),{destroy(){t(2,a=void 0)}}}return $(async()=>{const r=await ce(()=>import("./p5.min.BwJiqC9S.js").then(n=>n.p),[],import.meta.url),{default:C}=r,H=Object.entries(r).filter(([n,g])=>g instanceof Function&&n[0]!=="_"&&n!=="default");d&&console.log("available p5 native classes",H),y=new C(n=>(n=oe(n,H),d&&console.log("p5 instance",n),window._p5Instance=n,s(n)),a),w.ref(),w.instance()}),c.$$set=r=>{"target"in r&&t(2,a=r.target),"sketch"in r&&t(3,s=r.sketch),"parentDivStyle"in r&&t(0,l=r.parentDivStyle),"debug"in r&&t(4,d=r.debug)},[l,u,a,s,d]}class ge extends T{constructor(i){super(),v(this,i,fe,le,j,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function he(c){let i,t,a;return t=new ge({props:{sketch:c[1]}}),{c(){i=P("div"),te(t.$$.fragment),this.h()},l(s){i=M(s,"DIV",{class:!0});var l=O(i);ie(t.$$.fragment,l),l.forEach(E),this.h()},h(){x(i,"class","viz-container svelte-1c5n77j")},m(s,l){B(s,i,l),ne(t,i,null),c[13](i),a=!0},p:A,i(s){a||(se(t.$$.fragment,s),a=!0)},o(s){ae(t.$$.fragment,s),a=!1},d(s){s&&E(i),re(t),c[13](null)}}}function de(c,i,t){let{asciiGradient:a="▚▀▓▒░#@■□▪▫/*+=-~◆◇⬤▚▀▓▒░◯○^:,._▚▀▓▒░#@■□▪▫:·"}=i;a="▚▀▓▒░#@■□▪▫/*+=-~◆◇⬤▚▀▓▒░●^:,._▚▀▓▒░#@■□▪▫:·";let{grid:s=15}=i,{scale:l=.01}=i,{speed:d=.002}=i,{highlite:y="#0000ff"}=i,{background:b="#efefef"}=i,{imageURL:w=""}=i,{imageWidth:u=1200}=i,{imageHeight:r=800}=i,{resize:C}=i,f,H=0,n,g=null,F=e=>{e.setup=()=>{const h=f.offsetWidth,_=f.offsetHeight;e.createCanvas(h,_),e.textFont("Courier"),e.textAlign(e.CENTER,e.CENTER),e.noStroke(),e.frameRate(20),e._asciiGradient=a,e._grid=s,e._scale=l,e._speed=d,e._highlite=y,e._background=b,e._imageURL=w,e._imageWidth=u,e._imageHeight=r,t(12,n=e)},e.draw=()=>{e.background(e._background);const h=1;if(H+=h*e._speed,q(H,h,e._scale),e._imageURL&&(!g||g.url!==e._imageURL)&&e.loadImage(e._imageURL,_=>{_.url=e._imageURL,g=_}),g){let _=s,I=e._imageWidth-2*_,R=e._imageHeight-2*_,k=Math.min(I/g.width,R/g.height),m=g.width*k,L=g.height*k,S=(e._imageWidth-m)/2,W=(e._imageHeight-L)/2;e.image(g,S,W,m,L)}};function q(h,_,I){const R=e.floor(e.width/e._grid),k=e.floor(e.height/e._grid),m=e.width/R;e.textSize(m);const L=h*.9,S=h*.9;let W=new Array(k);for(let o=0;o<k;o++)W[o]=e.sin(h+o*.1);let D=new Array(R);for(let o=0;o<R;o++)D[o]=e.cos(h+o*.1);const V=4;e.colorMode(e.HSB,360,100,100,100);let U=e.color(e._highlite),X=(e.hue(U)+30)%360;e.color(X,e.saturation(U),e.brightness(U)),e.colorMode(e.RGB);for(let o=0;o<k;o++)for(let z=0;z<R;z++){const Y=e.noise((z+L)*I,(o+S)*I,h),G=e.floor(e.map(Y,0,1,0,e._asciiGradient.length-1)),J=e._asciiGradient.charAt(G),K=z*m+m/2+W[o],Q=o*m+m/2+D[z];G%V===0?e.fill(e._highlite):G%(V+1)===0||e.fill("#ffffff"),e.push(),e.translate(K,Q),e.text(J,0,0),e.pop()}}e.windowResized=()=>{e.resizeCanvas(f==null?void 0:f.offsetWidth,f==null?void 0:f.offsetHeight)}};function N(e){ee[e?"unshift":"push"](()=>{f=e,t(0,f)})}return c.$$set=e=>{"asciiGradient"in e&&t(2,a=e.asciiGradient),"grid"in e&&t(3,s=e.grid),"scale"in e&&t(4,l=e.scale),"speed"in e&&t(5,d=e.speed),"highlite"in e&&t(6,y=e.highlite),"background"in e&&t(7,b=e.background),"imageURL"in e&&t(8,w=e.imageURL),"imageWidth"in e&&t(9,u=e.imageWidth),"imageHeight"in e&&t(10,r=e.imageHeight),"resize"in e&&t(11,C=e.resize)},c.$$.update=()=>{c.$$.dirty&6140&&n&&(t(12,n._asciiGradient=a,n),t(12,n._grid=s,n),t(12,n._scale=l,n),t(12,n._speed=d,n),t(12,n._highlite=y,n),t(12,n._background=b,n),t(12,n._imageURL=w,n),t(12,n._imageWidth=u,n),t(12,n._imageHeight=r,n)),c.$$.dirty&7680&&n&&u&&r&&C==!0&&n.resizeCanvas(u,r)},[f,F,a,s,l,d,y,b,w,u,r,C,n,N]}class be extends T{constructor(i){super(),v(this,i,de,he,j,{asciiGradient:2,grid:3,scale:4,speed:5,highlite:6,background:7,imageURL:8,imageWidth:9,imageHeight:10,resize:11})}}export{be as V};
