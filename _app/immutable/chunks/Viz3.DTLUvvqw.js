import{s as I,e as V,c as F,b as O,f as z,p as U,i as j,C as J,n as Y,D as K,o as Q,u as X}from"./scheduler.DqNCwPbu.js";import{S as B,i as P,b as Z,d as v,m as p,a as $,t as ee,e as te}from"./index.BfffwfwO.js";import{_ as ie}from"./preload-helper.C1FmrZbK.js";function ne(l){let i,t,r;return{c(){i=V("div"),this.h()},l(n){i=F(n,"DIV",{style:!0,class:!0}),O(i).forEach(z),this.h()},h(){U(i,"style",l[0]),U(i,"class","m-0")},m(n,a){j(n,i,a),t||(r=J(l[1].call(null,i)),t=!0)},p(n,[a]){a&1&&U(i,"style",n[0])},i:Y,o:Y,d(n){n&&z(i),t=!1,r()}}}function re(l,i){return i.forEach(([t,r])=>l[t]=r),l}function oe(l,i,t){let{target:r=void 0}=i,{sketch:n=void 0}=i,{parentDivStyle:a="display: block;"}=i,{debug:g=!1}=i,M;const f=K(),m={ref(){f("ref",r)},instance(){f("instance",M)}};function h(s){return t(2,r=s),{destroy(){t(2,r=void 0)}}}return Q(async()=>{const s=await ie(()=>import("./p5.min.BwJiqC9S.js").then(d=>d.p),[],import.meta.url),{default:b}=s,o=Object.entries(s).filter(([d,C])=>C instanceof Function&&d[0]!=="_"&&d!=="default");g&&console.log("available p5 native classes",o),M=new b(d=>(d=re(d,o),g&&console.log("p5 instance",d),window._p5Instance=d,n(d)),r),m.ref(),m.instance()}),l.$$set=s=>{"target"in s&&t(2,r=s.target),"sketch"in s&&t(3,n=s.sketch),"parentDivStyle"in s&&t(0,a=s.parentDivStyle),"debug"in s&&t(4,g=s.debug)},[a,h,r,n,g]}class ae extends B{constructor(i){super(),P(this,i,oe,ne,I,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function le(l){let i,t,r;return t=new ae({props:{sketch:l[1]}}),{c(){i=V("div"),Z(t.$$.fragment),this.h()},l(n){i=F(n,"DIV",{class:!0});var a=O(i);v(t.$$.fragment,a),a.forEach(z),this.h()},h(){U(i,"class","viz-container svelte-1c5n77j")},m(n,a){j(n,i,a),p(t,i,null),l[12](i),r=!0},p:Y,i(n){r||($(t.$$.fragment,n),r=!0)},o(n){ee(t.$$.fragment,n),r=!1},d(n){n&&z(i),te(t),l[12](null)}}}const se=30,de=100;function ce(l,i,t){i=i/100,t=t/100;const r=a=>(a+l/60)%6,n=a=>t-t*i*Math.max(Math.min(r(a),4-r(a),1),0);return[Math.round(n(5)*255),Math.round(n(3)*255),Math.round(n(1)*255)]}function ge(l,i,t){const r=n=>{const a=n.toString(16);return a.length===1?"0"+a:a};return"#"+r(l)+r(i)+r(t)}function fe(l,i,t){let{grid:r=50}=i,{gridY:n=2}=i,{gradientWidth:a=10}=i,{endColor:g="#efefef"}=i;const M=Math.floor(Math.random()*360);ge(...ce(M,se,de));let{highlite:f="#2303FC"}=i,{imageURL:m=""}=i,{imageWidth:h=1200}=i,{imageHeight:s=800}=i,{resize:b}=i,u,o,d=null,C=[],x=[];function E(){for(let e=0;e<n;e++)C[e]=o?o.random(0,r):0,x[e]=o?o.random(-.1,.1):0}let T=e=>{e.setup=()=>{const y=u.offsetWidth,W=u.offsetHeight;e.createCanvas(y,W),e.noStroke(),e.rectMode(e.CORNER),E(),e.background(255),e._grid=r,e._gridY=n,e._gradientWidth=a,e._startColor=f,e._endColor=g,e._imageURL=m,e._imageWidth=h,e._imageHeight=s,t(11,o=e)},e.draw=()=>{e.fill(255,20),e.rect(0,0,e.width,e.height);const y=e.width/e._grid,W=e.height/e._gridY;for(let c=0;c<e._gridY;c++)C[c]=(C[c]+x[c])%e._grid;e.frameCount%120===0&&(t(2,r=e.random([50,75,100])),t(3,n=e.random([2,3,4,5,10,20])),t(4,a=e.random([5,7,10,15,20,50])),["#2303FC","#ff8501","#00ff02"].includes(f)&&t(5,f=e.random(["#2303FC","#ff8501","#00ff02"])));let w=e.color(e._startColor);e.colorMode(e.HSB,360,100,100,100);let A=(e.hue(w)+236)%360,G=e.color(A,e.saturation(w),e.brightness(w)),N=(e.hue(G)+236)%360;e.color(N,e.saturation(w),e.brightness(w)),e.colorMode(e.RGB);for(let c=0;c<e._gridY;c++)for(let H=0;H<e._grid;H++){let D=H*y,k=c*W,L=H+.5,_=Math.abs(L-C[c]);_>e._grid/2&&(_=e._grid-_);let S=e.constrain(_/e._gradientWidth,0,1),R;c%4,R=e.lerpColor(e.color(e._startColor),e.color(e._endColor),S),e.fill(R),e.stroke(20),e.strokeWeight(.3),e.rect(D,k,y,W)}if(e._imageURL&&(!d||d.url!==e._imageURL)&&e.loadImage(e._imageURL,c=>{c.url=e._imageURL,d=c}),d){let c=30,H=e._imageWidth-2*c,D=e._imageHeight-2*c,k=Math.min(H/d.width,D/d.height),L=d.width*k,_=d.height*k,S=(e._imageWidth-L)/2,R=(e._imageHeight-_)/2;e.image(d,S,R,L,_)}},e.windowResized=()=>{const y=u.offsetWidth,W=u.offsetHeight;e.resizeCanvas(y,W)}};function q(e){X[e?"unshift":"push"](()=>{u=e,t(0,u)})}return l.$$set=e=>{"grid"in e&&t(2,r=e.grid),"gridY"in e&&t(3,n=e.gridY),"gradientWidth"in e&&t(4,a=e.gradientWidth),"endColor"in e&&t(6,g=e.endColor),"highlite"in e&&t(5,f=e.highlite),"imageURL"in e&&t(7,m=e.imageURL),"imageWidth"in e&&t(8,h=e.imageWidth),"imageHeight"in e&&t(9,s=e.imageHeight),"resize"in e&&t(10,b=e.resize)},l.$$.update=()=>{l.$$.dirty&3068&&o&&(t(11,o._grid=r,o),t(11,o._gridY=n,o),t(11,o._gradientWidth=a,o),t(11,o._startColor=f,o),t(11,o._endColor=g,o),t(11,o._imageURL=m,o),t(11,o._imageWidth=h,o),t(11,o._imageHeight=s,o),E()),l.$$.dirty&3840&&o&&h&&s&&b==!0&&o.resizeCanvas(h,s)},[u,T,r,n,a,f,g,m,h,s,b,o,q]}class _e extends B{constructor(i){super(),P(this,i,fe,le,I,{grid:2,gridY:3,gradientWidth:4,endColor:6,highlite:5,imageURL:7,imageWidth:8,imageHeight:9,resize:10})}}export{_e as V};
